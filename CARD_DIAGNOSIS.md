# 卡片设计更新 - 诊断和解决方案

## 重要确认

### ✅ 新设计的位置

新的卡片设计**只在**以下位置生效：

- **页面**：编辑器页面（BuilderPage）
- **区域**：右下方的"最近片段"区域
- **位置**：在"保存片段"按钮下方

### ❌ 不生效的位置

管理页面的卡片设计**没有改变**。如果你在看管理页面，看起来会和之前一样。

## 如何确认你在正确的页面

### 1. 检查顶部导航

点击顶部的 **"编辑器"** 按钮（不是"管理"）

### 2. 查找特定元素

在编辑器页面的右下角，你应该看到：

```
┌─────────────────────────────────┐
│ [保存片段] 按钮                  │
│                                 │
│ 最近片段                        │  ← 这个标题
│                                 │
│ ┌──────────┐  ┌──────────┐      │
│ │          │  │          │      │
│ │  预览    │  │  预览    │      │
│ │          │  │          │      │
│ ├──────────┤  ├──────────┤      │
│ │ 标题...  │  │ 标题...  │      │
│ │ ⏱ 1:23..│  │ ⏱ 1:23..│      │
│ │[加载][删]│  │[加载][删]│      │
│ └──────────┘  └──────────┘      │
└─────────────────────────────────┘
```

### 3. 如果卡片列表是空的

新设计只会在你有保存的卡片时显示。如果没有卡片，会显示"暂无片段。"

## 完整的故障排查步骤

### 步骤 1：确认你在编辑器页面

1. 看顶部导航栏
2. 点击 **"编辑器"** 按钮
3. 确保不是点击"管理"或"社区"

### 步骤 2：滚动到右下角

在编辑器页面：
1. 找到右侧的编辑面板
2. 向下滚动到底部
3. 找到"保存片段"按钮
4. 看按钮下方的"最近片段"区域

### 步骤 3：确认你有卡片

新设计需要至少有 1 张已保存的卡片才会显示。

如果没有卡片：
1. 先选择一个视频（B站或本地）
2. 选择时间范围
3. 输入卡片名称
4. 点击"保存片段"按钮
5. 保存后卡片会立即出现在下方

### 步骤 4：强制刷新（如果还是在编辑器页面）

1. 按 `Ctrl + Shift + Delete` 打开清除缓存对话框
2. 选择"缓存的图像和文件"
3. 点击"清除数据"
4. 完全关闭应用
5. 重新启动应用

## 诊断检查清单

请确认以下所有项：

- [ ] 我在编辑器页面（不是管理页面）
- [ ] 我滚动到了右下角的"最近片段"区域
- [ ] 我已经保存了至少 1 张卡片
- [ ] 我完全关闭并重新启动了应用（不只是刷新）
- [ ] 我看到的是"最近片段"这个标题（不是管理列表）

## 如果以上都确认了但还是没变

请告诉我：

1. 你在哪个页面？（编辑器/管理/社区）
2. "最近片段"区域显示的是什么？（卡片列表/暂无片段）
3. 如果你保存了卡片，它们长什么样？（描述一下布局）
4. 你能看到"最近片段"这个标题吗？

## 可视化对比

### 编辑器页面（新设计生效的位置）

```
┌────────────────┬────────────────────┐
│ 搜索/素材选择   │    预览窗口         │
│                │                    │
│                │                    │
├────────────────┤                    │
│                │                    │
│   编辑表单      │                    │
│                │                    │
│                │                    │
├────────────────┤                    │
│                │                    │
│                │                    │
│   保存片段按钮  │                    │
│                │                    │
│ ┌────────────┐│                    │
│ │最近片段    ││                    │
│ │┌──┐┌──┐┌──┐││                    │
│ ││预││预││预│││                    │
│ ││览││览││览│││                    │
│ │├──┤├──┤├──┤││                    │
│ ││卡││卡││卡│││                    │
│ ││片││片││片│││                    │
│ │└──┘└──┘└──┘││                    │
│ └────────────┘│                    │
└────────────────┴────────────────────┘
```

### 管理页面（旧设计，未改变）

```
┌────────────────────────────────┐
│ 管理页面标题                    │
├────────────────────────────────┤
│ 筛选和操作按钮                  │
├────────────────────────────────┤
│ ┌────────────────────────┐     │
│ │ 卡片1 (列表布局)        │     │
│ └────────────────────────┘     │
│ ┌────────────────────────┐     │
│ │ 卡片2 (列表布局)        │     │
│ └────────────────────────┘     │
└────────────────────────────────┘
```

## 最终测试

### 测试新设计是否生效

在编辑器页面：

1. 打开浏览器开发者工具（F12）
2. 切换到 Console（控制台）标签
3. 输入并回车：
   ```javascript
   document.querySelector('.save-items')
   ```
4. 如果返回 `<div class="save-items">`，说明元素存在
5. 切换到 Elements（元素）标签
6. 找到 `.save-items` 元素
7. 在右侧 Styles 面板查看
8. 应该看到：`display: grid` 和 `grid-template-columns: repeat(auto-fill, minmax(280px, 1fr))`

### 如果元素存在但样式不对

说明 CSS 没有加载。尝试：
1. 清除所有缓存
2. 删除 `apps/webui/dist` 文件夹
3. 重新构建：`npm run build:webui`
4. 重启应用

### 如果元素不存在

说明你在错误的页面。请确认：
1. 你在编辑器页面
2. 你已经保存了至少 1 张卡片
3. 你在看"最近片段"区域

## 文件位置参考

- 新设计代码：`apps/webui/src/pages/BuilderPage.jsx` 第 383-430 行
- 新设计样式：`apps/webui/src/index.css` 第 1949-2101 行
- 构建输出：`apps/webui/dist/assets/`
- 预览文件：`CARD_DESIGN_PREVIEW.html`
