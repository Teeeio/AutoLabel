<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-size: 28px; font-weight: bold; fill: #1e293b; }
      .subtitle { font-size: 18px; font-weight: 600; fill: #334155; }
      .step-box { fill: #ffffff; stroke: #94a3b8; stroke-width: 2; rx: 8; }
      .step-header { fill: #f1f5f9; }
      .step-title { font-size: 15px; font-weight: 600; fill: #0f172a; }
      .step-desc { font-size: 13px; fill: #475569; }
      .step-detail { font-size: 12px; fill: #64748b; }
      .process-arrow { stroke: #3b82f6; stroke-width: 3; fill: none; marker-end: url(#arrowhead-blue); }
      .data-arrow { stroke: #059669; stroke-width: 3; fill: none; marker-end: url(#arrowhead-green); }
      .error-arrow { stroke: #dc2626; stroke-width: 2; fill: none; stroke-dasharray: 5,5; marker-end: url(#arrowhead-red); }

      .bilibili-box { fill: #fef3c7; stroke: #f59e0b; stroke-width: 3; rx: 10; }
      .bilibili-title { font-size: 16px; font-weight: 700; fill: #b45309; }

      .local-box { fill: #dbeafe; stroke: #3b82f6; stroke-width: 3; rx: 10; }
      .local-title { font-size: 16px; font-weight: 700; fill: #1d4ed8; }

      .process-box { fill: #f3e8ff; stroke: #9333ea; stroke-width: 2; rx: 8; }
      .process-title { font-size: 14px; font-weight: 600; fill: #7e22ce; }

      .output-box { fill: #dcfce7; stroke: #059669; stroke-width: 3; rx: 10; }
      .output-title { font-size: 16px; font-weight: 700; fill: #047857; }

      .error-box { fill: #fee2e2; stroke: #dc2626; stroke-width: 2; rx: 8; }
      .error-title { font-size: 14px; font-weight: 600; fill: #dc2626; }

      .step-number { font-size: 40px; font-weight: bold; fill: #cbd5e1; }
      .icon-text { font-size: 24px; }
    </style>

    <marker id="arrowhead-blue" markerWidth="12" markerHeight="12" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#3b82f6"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="12" markerHeight="12" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#059669"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="12" markerHeight="12" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#dc2626"/>
    </marker>
  </defs>

  <!-- æ ‡é¢˜ -->
  <text x="700" y="50" text-anchor="middle" class="title">è§†é¢‘æ‹¼æ¥å¤„ç† Pipeline æµç¨‹å›¾</text>

  <!-- ==================== å·¦ä¾§ï¼šBilibili è§†é¢‘æº ==================== -->

  <text x="50" y="100" class="subtitle">Bilibili è§†é¢‘æº</text>

  <!-- è¾“å…¥å¡ç‰‡ -->
  <g transform="translate(50, 130)">
    <rect x="0" y="0" width="300" height="120" class="bilibili-box"/>
    <text x="150" y="30" text-anchor="middle" class="bilibili-title">ğŸ“¼ Bilibili å¡ç‰‡</text>
    <text x="20" y="60" class="step-detail">â€¢ BVID: BV1234567890</text>
    <text x="20" y="80" class="step-detail">â€¢ æ—¶é—´èŒƒå›´: 00:30 - 01:00</text>
    <text x="20" y="100" class="step-detail">â€¢ CVå·: CV1a2B3c4</text>
  </g>

  <!-- æ­¥éª¤1ï¼šè§£æè§†é¢‘ä¿¡æ¯ -->
  <g transform="translate(50, 280)">
    <rect x="0" y="0" width="300" height="140" class="step-box"/>
    <rect x="0" y="0" width="300" height="40" class="step-header" rx="8"/>
    <rect x="0" y="35" width="300" height="10" fill="#f1f5f9"/>
    <text x="20" y="65" class="step-number">1</text>
    <text x="70" y="30" class="step-title">è§£æè§†é¢‘ä¿¡æ¯</text>
    <text x="70" y="55" class="step-desc">preview:resolve</text>
    <text x="20" y="90" class="step-detail">â€¢ è·å– aid, cid</text>
    <text x="20" y="110" class="step-detail">â€¢ è·å–è§†é¢‘æ—¶é•¿</text>
    <text x="20" y="130" class="step-detail">â€¢ éªŒè¯æ—¶é—´èŒƒå›´æœ‰æ•ˆæ€§</text>
  </g>

  <!-- æ­¥éª¤2ï¼šè·å–è§†é¢‘æµ -->
  <g transform="translate(50, 450)">
    <rect x="0" y="0" width="300" height="140" class="step-box"/>
    <rect x="0" y="0" width="300" height="40" class="step-header" rx="8"/>
    <rect x="0" y="35" width="300" height="10" fill="#f1f5f9"/>
    <text x="20" y="65" class="step-number">2</text>
    <text x="70" y="30" class="step-title">è·å–è§†é¢‘æµ</text>
    <text x="70" y="55" class="step-desc">preview:info + DASH è§£æ</text>
    <text x="20" y="90" class="step-detail">â€¢ è§£æ DASH manifest</text>
    <text x="20" y="110" class="step-detail">â€¢ é€‰æ‹©æœ€ä½³è´¨é‡æµ</text>
    <text x="20" y="130" class="step-detail">â€¢ è·å–è§†é¢‘åˆ†ç‰‡ URL</text>
  </g>

  <!-- æ­¥éª¤3ï¼šä¸‹è½½è§†é¢‘ç‰‡æ®µ -->
  <g transform="translate(50, 620)">
    <rect x="0" y="0" width="300" height="140" class="step-box"/>
    <rect x="0" y="0" width="300" height="40" class="step-header" rx="8"/>
    <rect x="0" y="35" width="300" height="10" fill="#f1f5f9"/>
    <text x="20" y="65" class="step-number">3</text>
    <text x="70" y="30" class="step-title">ä¸‹è½½è§†é¢‘ç‰‡æ®µ</text>
    <text x="70" y="55" class="step-desc">generator:download</text>
    <text x="20" y="90" class="step-detail">â€¢ ä¸‹è½½æŒ‡å®šæ—¶é—´èŒƒå›´</text>
    <text x="20" y="110" class="step-detail">â€¢ ä¿å­˜åˆ°ä¸´æ—¶æ–‡ä»¶</text>
    <text x="20" y="130" class="step-detail">â€¢ .mp4 æ ¼å¼</text>
  </g>

  <!-- Bilibili æµç¨‹ç®­å¤´ -->
  <path d="M 200 250 L 200 280" class="process-arrow"/>
  <path d="M 200 420 L 200 450" class="process-arrow"/>
  <path d="M 200 590 L 200 620" class="process-arrow"/>

  <!-- ==================== å³ä¾§ï¼šæœ¬åœ°è§†é¢‘æº ==================== -->

  <text x="450" y="100" class="subtitle">æœ¬åœ°è§†é¢‘æº</text>

  <!-- è¾“å…¥å¡ç‰‡ -->
  <g transform="translate(450, 130)">
    <rect x="0" y="0" width="300" height="120" class="local-box"/>
    <text x="150" y="30" text-anchor="middle" class="local-title">ğŸ“ æœ¬åœ°è§†é¢‘å¡ç‰‡</text>
    <text x="20" y="60" class="step-detail">â€¢ æœ¬åœ°è·¯å¾„: F:/Videos/dance.mp4</text>
    <text x="20" y="80" class="step-detail">â€¢ æ—¶é—´èŒƒå›´: 01:00 - 01:30</text>
    <text x="20" y="100" class="step-detail">â€¢ ID: local-1234567890</text>
  </g>

  <!-- æ­¥éª¤1ï¼šè¯»å–æœ¬åœ°æ–‡ä»¶ -->
  <g transform="translate(450, 280)">
    <rect x="0" y="0" width="300" height="140" class="step-box"/>
    <rect x="0" y="0" width="300" height="40" class="step-header" rx="8"/>
    <rect x="0" y="35" width="300" height="10" fill="#f1f5f9"/>
    <text x="20" y="65" class="step-number">1</text>
    <text x="70" y="30" class="step-title">è¯»å–æœ¬åœ°æ–‡ä»¶</text>
    <text x="70" y="55" class="step-desc">local-video:load</text>
    <text x="20" y="90" class="step-detail">â€¢ é€šè¿‡ IPC è¯»å–æ–‡ä»¶</text>
    <text x="20" y="110" class="step-detail">â€¢ è½¬æ¢ä¸º ArrayBuffer</text>
    <text x="20" y="130" class="step-detail">â€¢ åˆ›å»º Blob URL</text>
  </g>

  <!-- æ­¥éª¤2ï¼šéªŒè¯è§†é¢‘ -->
  <g transform="translate(450, 450)">
    <rect x="0" y="0" width="300" height="140" class="step-box"/>
    <rect x="0" y="0" width="300" height="40" class="step-header" rx="8"/>
    <rect x="0" y="35" width="300" height="10" fill="#f1f5f9"/>
    <text x="20" y="65" class="step-number">2</text>
    <text x="70" y="30" class="step-title">éªŒè¯è§†é¢‘</text>
    <text x="70" y="55" class="step-desc">validateCard</text>
    <text x="20" y="90" class="step-detail">â€¢ æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</text>
    <text x="20" y="110" class="step-detail">â€¢ éªŒè¯æ—¶é—´èŒƒå›´</text>
    <text x="20" y="130" class="step-detail">â€¢ è·å–å…ƒæ•°æ®</text>
  </g>

  <!-- æ­¥éª¤3ï¼šç›´æ¥ä½¿ç”¨ -->
  <g transform="translate(450, 620)">
    <rect x="0" y="0" width="300" height="140" class="step-box"/>
    <rect x="0" y="0" width="300" height="40" class="step-header" rx="8"/>
    <rect x="0" y="35" width="300" height="10" fill="#f1f5f9"/>
    <text x="20" y="65" class="step-number">3</text>
    <text x="70" y="30" class="step-title">å‡†å¤‡æ‹¼æ¥</text>
    <text x="70" y="55" class="step-desc">æ— éœ€ä¸‹è½½</text>
    <text x="20" y="90" class="step-detail">â€¢ ç›´æ¥ä½¿ç”¨æœ¬åœ°æ–‡ä»¶</text>
    <text x="20" y="110" class="step-detail">â€¢ æŒ‰æ—¶é—´èŒƒå›´è£å‰ª</text>
    <text x="20" y="130" class="step-detail" fill="#059669">âœ“ æ›´å¿«çš„å¤„ç†é€Ÿåº¦</text>
  </g>

  <!-- æœ¬åœ°æµç¨‹ç®­å¤´ -->
  <path d="M 600 250 L 600 280" class="process-arrow"/>
  <path d="M 600 420 L 600 450" class="process-arrow"/>
  <path d="M 600 590 L 600 620" class="process-arrow"/>

  <!-- ==================== ä¸­é—´ï¼šå…±åŒå¤„ç†æµç¨‹ ==================== -->

  <text x="850" y="100" class="subtitle">å…±åŒå¤„ç†æµç¨‹</text>

  <!-- åˆå¹¶è¾“å…¥ -->
  <g transform="translate(850, 130)">
    <rect x="0" y="0" width="250" height="80" class="process-box"/>
    <text x="125" y="30" text-anchor="middle" class="process-title">è§†é¢‘ç‰‡æ®µé›†åˆ</text>
    <text x="20" y="55" class="step-detail">â€¢ Bilibili ä¸‹è½½çš„ç‰‡æ®µ</text>
    <text x="20" y="70" class="step-detail">â€¢ æœ¬åœ°è§†é¢‘ç‰‡æ®µ</text>
  </g>

  <!-- ç®­å¤´ -->
  <path d="M 350 690 L 600 690 L 600 170 L 850 170" class="data-arrow"/>
  <path d="M 750 690 L 820 690 L 820 170 L 850 170" class="data-arrow"/>

  <!-- æ­¥éª¤1ï¼šè£å‰ªç‰‡æ®µ -->
  <g transform="translate(850, 240)">
    <rect x="0" y="0" width="250" height="120" class="step-box"/>
    <rect x="0" y="0" width="250" height="35" class="step-header" rx="8"/>
    <rect x="0" y="30" width="250" height="7" fill="#f1f5f9"/>
    <text x="15" y="55" class="step-number">1</text>
    <text x="50" y="25" class="step-title">è£å‰ªè§†é¢‘ç‰‡æ®µ</text>
    <text x="50" y="50" class="step-desc">FFmpeg clip</text>
    <text x="20" y="80" class="step-detail">â€¢ æŒ‰ç…§ç²¾ç¡®æ—¶é—´è£å‰ª</text>
    <text x="20" y="100" class="step-detail">â€¢ -ss start -to end</text>
  </g>

  <!-- ç®­å¤´ -->
  <path d="M 975 210 L 975 240" class="process-arrow"/>

  <!-- æ­¥éª¤2ï¼šåº”ç”¨æ‹¼æ¥è§„åˆ™ -->
  <g transform="translate(850, 390)">
    <rect x="0" y="0" width="250" height="160" class="step-box"/>
    <rect x="0" y="0" width="250" height="35" class="step-header" rx="8"/>
    <rect x="0" y="30" width="250" height="7" fill="#f1f5f9"/>
    <text x="15" y="55" class="step-number">2</text>
    <text x="50" y="25" class="step-title">åº”ç”¨æ‹¼æ¥è§„åˆ™</text>

    <rect x="15" y="65" width="220" height="40" fill="#dbeafe" rx="4"/>
    <text x="30" y="82" class="step-detail" font-weight="600">ç›´æ¥æ‹¼æ¥</text>
    <text x="30" y="98" class="step-detail">ç‰‡æ®µé¦–å°¾ç›¸è¿</text>

    <rect x="15" y="115" width="220" height="40" fill="#fef3c7" rx="4"/>
    <text x="30" y="132" class="step-detail" font-weight="600">æ·¡å…¥æ·¡å‡º</text>
    <text x="30" y="148" class="step-detail">äº¤å‰é‡å  {overlap}s</text>
  </g>

  <!-- ç®­å¤´ -->
  <path d="M 975 360 L 975 390" class="process-arrow"/>

  <!-- æ­¥éª¤3ï¼šæ‹¼æ¥è§†é¢‘ -->
  <g transform="translate(850, 580)">
    <rect x="0" y="0" width="250" height="140" class="step-box"/>
    <rect x="0" y="0" width="250" height="35" class="step-header" rx="8"/>
    <rect x="0" y="30" width="250" height="7" fill="#f1f5f9"/>
    <text x="15" y="55" class="step-number">3</text>
    <text x="50" y="25" class="step-title">æ‹¼æ¥è§†é¢‘</text>
    <text x="50" y="50" class="step-desc">FFmpeg concat</text>
    <text x="20" y="80" class="step-detail">â€¢ åˆ›å»º concat åˆ—è¡¨</text>
    <text x="20" y="100" class="step-detail">â€¢ åˆå¹¶æ‰€æœ‰ç‰‡æ®µ</text>
    <text x="20" y="120" class="step-detail">â€¢ ä¿æŒéŸ³è§†é¢‘åŒæ­¥</text>
  </g>

  <!-- ç®­å¤´ -->
  <path d="M 975 550 L 975 580" class="process-arrow"/>

  <!-- æ­¥éª¤4ï¼šå¯¼å‡ºè§†é¢‘ -->
  <g transform="translate(850, 750)">
    <rect x="0" y="0" width="250" height="120" class="output-box"/>
    <text x="125" y="35" text-anchor="middle" class="output-title">ğŸ¬ å¯¼å‡ºå®Œæˆ</text>
    <text x="20" y="65" class="step-detail">â€¢ è¾“å‡ºè·¯å¾„: output.mp4</text>
    <text x="20" y="85" class="step-detail">â€¢ æ€»æ—¶é•¿: 05:30</text>
    <text x="20" y="105" class="step-detail">â€¢ å¡ç‰‡æ•°: 11 ä¸ª</text>
  </g>

  <!-- ç®­å¤´ -->
  <path d="M 975 720 L 975 750" class="process-arrow"/>

  <!-- ==================== å³ä¾§ï¼šé”™è¯¯å¤„ç† ==================== -->

  <text x="1180" y="100" class="subtitle">é”™è¯¯å¤„ç†</text>

  <!-- Bilibili é”™è¯¯ -->
  <g transform="translate(1150, 280)">
    <rect x="0" y="0" width="200" height="100" class="error-box"/>
    <text x="100" y="25" text-anchor="middle" class="error-title">Bilibili é”™è¯¯</text>
    <text x="15" y="50" class="step-detail">â€¢ è§†é¢‘404</text>
    <text x="15" y="65" class="step-detail">â€¢ DASHè§£æå¤±è´¥</text>
    <text x="15" y="80" class="step-detail">â€¢ ä¸‹è½½è¶…æ—¶</text>
  </g>

  <!-- æœ¬åœ°é”™è¯¯ -->
  <g transform="translate(1150, 450)">
    <rect x="0" y="0" width="200" height="100" class="error-box"/>
    <text x="100" y="25" text-anchor="middle" class="error-title">æœ¬åœ°é”™è¯¯</text>
    <text x="15" y="50" class="step-detail">â€¢ æ–‡ä»¶ä¸å­˜åœ¨</text>
    <text x="15" y="65" class="step-detail">â€¢ æ ¼å¼ä¸æ”¯æŒ</text>
    <text x="15" y="80" class="step-detail">â€¢ æŸåçš„è§†é¢‘</text>
  </g>

  <!-- æ‹¼æ¥é”™è¯¯ -->
  <g transform="translate(1150, 620)">
    <rect x="0" y="0" width="200" height="100" class="error-box"/>
    <text x="100" y="25" text-anchor="middle" class="error-title">æ‹¼æ¥é”™è¯¯</text>
    <text x="15" y="50" class="step-detail">â€¢ FFmpeg å¤±è´¥</text>
    <text x="15" y="65" class="step-detail">â€¢ ç¼–ç ä¸å…¼å®¹</text>
    <text x="15" y="80" class="step-detail">â€¢ ç£ç›˜ç©ºé—´ä¸è¶³</text>
  </g>

  <!-- é”™è¯¯å¤„ç†ç®­å¤´ -->
  <path d="M 350 350 L 1150 330" class="error-arrow"/>
  <path d="M 750 350 L 1150 500" class="error-arrow"/>
  <path d="M 1100 650 L 1150 670" class="error-arrow"/>

  <!-- é”™è¯¯æ¢å¤ -->
  <g transform="translate(1150, 780)">
    <rect x="0" y="0" width="200" height="80" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="8"/>
    <text x="100" y="25" text-anchor="middle" class="step-title" fill="#b45309">é”™è¯¯æ¢å¤</text>
    <text x="15" y="50" class="step-detail">â€¢ è·³è¿‡é”™è¯¯å¡ç‰‡</text>
    <text x="15" y="65" class="step-detail">â€¢ è®°å½•æ—¥å¿—</text>
  </g>

  <path d="M 1250 720 L 1250 780" class="data-arrow"/>

  <!-- ==================== åº•éƒ¨ï¼šè¿›åº¦æ˜¾ç¤º ==================== -->

  <g transform="translate(50, 820)">
    <rect x="0" y="0" width="1050" height="150" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2" rx="10"/>
    <text x="525" y="30" text-anchor="middle" class="subtitle">å®æ—¶è¿›åº¦åé¦ˆ</text>

    <!-- è¿›åº¦æ¡ -->
    <rect x="30" y="50" width="990" height="30" fill="#e2e8f0" rx="15"/>
    <rect x="30" y="50" width="660" height="30" fill="#3b82f6" rx="15"/>
    <text x="360" y="72" text-anchor="middle" fill="#ffffff" font-weight="600">66%</text>

    <!-- è¿›åº¦è¯¦æƒ… -->
    <text x="30" y="100" class="step-detail">æ­£åœ¨å¤„ç†: ç¬¬ 7/11 ä¸ªç‰‡æ®µ</text>
    <text x="350" y="100" class="step-detail">å½“å‰: è£å‰ªè§†é¢‘ (CV7h8I9j0)</text>
    <text x="700" y="100" class="step-detail">é¢„è®¡å‰©ä½™: 00:45</text>

    <!-- æ—¥å¿— -->
    <text x="30" y="125" class="step-detail" fill="#059669">âœ“ å¡ç‰‡1-6 æ‹¼æ¥å®Œæˆ</text>
    <text x="30" y="140" class="step-detail" fill="#64748b">â†’ æ­£åœ¨å¤„ç†å¡ç‰‡7...</text>
  </g>

  <!-- å›¾ä¾‹ -->
  <g transform="translate(1150, 240)">
    <rect x="0" y="0" width="200" height="180" fill="#ffffff" stroke="#e2e8f0" stroke-width="2" rx="8"/>
    <text x="100" y="25" text-anchor="middle" class="subtitle" font-size="14px">å›¾ä¾‹</text>

    <rect x="15" y="40" width="40" height="25" class="bilibili-box"/>
    <text x="65" y="57" class="step-detail">Bilibili æº</text>

    <rect x="15" y="75" width="40" height="25" class="local-box"/>
    <text x="65" y="92" class="step-detail">æœ¬åœ°æº</text>

    <rect x="15" y="110" width="40" height="25" class="process-box"/>
    <text x="65" y="127" class="step-detail">å¤„ç†æ­¥éª¤</text>

    <rect x="15" y="145" width="40" height="25" class="output-box"/>
    <text x="65" y="162" class="step-detail">è¾“å‡ºç»“æœ</text>
  </g>

</svg>
